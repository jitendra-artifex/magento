<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     base_default
 * @copyright   Copyright (c) 2012 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */

/**
 * Product view template
 *
 * @see Mage_Catalog_Block_Product_View
 * @see Mage_Review_Block_Product_View
 */
?>
<?php $_helper = $this->helper('catalog/output'); ?>
<?php $_product = $this->getProduct(); ?>
<script type="text/javascript">
    var optionsPrice = new Product.OptionsPrice(<?php echo $this->getJsonConfig() ?>);
</script>
<div id="messages_product_view"><?php echo $this->getMessagesBlock()->getGroupedHtml() ?></div>
<div class="product-view">
    <div class="product-essential">
    <form action="<?php echo $this->getSubmitUrl($_product) ?>" method="post" id="product_addtocart_form"<?php if($_product->getOptions()): ?> enctype="multipart/form-data"<?php endif; ?>>
        
        <div class="product-img-box">
            <?php echo $this->getChildHtml('media') ?>
        </div>
        
        <div class="product-shop">
        	<div class="pro-dtl">
                <ul>
                	<?php $brandname = Mage::getModel('catalog/product')->load($_product->getId())->getAttributeText('brand');?>
      				<?php $madein = Mage::getModel('catalog/product')->load($_product->getId())->getAttributeText('made_in');?>
       				<?php $bottle_size = Mage::getModel('catalog/product')->load($_product->getId())->getAttributeText('bottle_size');?>
                
                    <li class="product-name"><?php echo $_helper->productAttribute($_product, $_product->getName(), 'name') ?></li>
                    <li class="brand-name"><?php echo $brandname; ?></li>
                    <li class="how-old"><?php echo $madein; ?></li>
                    <li class="weight"><?php echo $bottle_size; ?></li>
                </ul>
            </div>
            <div class="pro-social">
                <ul>
                    <li><a href="https://plus.google.com"><img alt="" src="<?php echo $this->getSkinurl();?>images/plus.png"></a></li>
                    <li><a href="https://mail.google.com"><img alt="" src="<?php echo $this->getSkinurl();?>images/mail-icon.png"></a></li>
                    <li><a href="https://www.facebook.com"><img alt="" src="<?php echo $this->getSkinurl();?>images/facebook-icon.png"></a></li>
                    <li><a href="https://twitter.com"><img alt="" src="<?php echo $this->getSkinurl();?>images/twitter-icon.png"></a></li>
                </ul>
            </div>
            <div class="cls"></div>
            <div class="product-decription">
                <?php /*?><p>Vestibulum vitae risus eu neque volutpat feugiat. Maecenas mauris eros, accumsan vitae magna a, laoreet vulputate magna. Proin scelerisque, enim at congue vehicula, nibh purus suscipit augue, vitae euismod mauris purus sit amet justo. Aenean tincidunt, nisi tempus sollicitudin gravida, neque mauris iaculis quam, in bibendum orci dui ullamcorper justo. </p>
                <p>primis in faucibus. Pellentesque feugiat nisi dolor, nec imperdiet mi tincidunt eu. Vestibulum luctus sem diam, eget scelerisque odio consectetur in. Nam vitae tellus hendrerit, luctus risus cursus, mollis mi. <a class="read-more" href="#">lees meer</a></p><?php */?>
                <?php echo $_helper->productAttribute($_product, nl2br($_product->getShortDescription()), 'short_description') ?><?php /*?><a class="read-more" href="#">lees meer</a><?php */?>
            </div>
            <div class="wine-making">
                <h2>Vinificatie</h2>
                <?php $attributeValue = Mage::getModel('catalog/product')->load($_product->getId())->getWineMaking();?>
                <p><?php echo $attributeValue; ?></p>
            </div>
            <?php echo $this->getChildHtml('product_type_data') ?>
			<?php echo $this->getTierPriceHtml() ?>
            <?php echo $this->getChildHtml('extrahint') ?>
            <?php if (!$this->hasOptions()):?>
            	<?php if($_product->isSaleable()): ?>
					<?php echo $this->getChildHtml('addtocart') ?>                        
                <?php endif; ?>                         
            <?php endif; ?>
            <div class="cls"></div>
            <div class="product-collateral">
            	<ul class="tabs">
                    <li><a id="detail1" class="details" href="javascript:void(0);">Details </a></li>
                    <li ><a id="detail2" class="details" href="javascript:void(0);">Bio</a></li>
                </ul>
                <div class="padder">
                    <p id="des" class="show">
                    	<?php $desc = Mage::getModel('catalog/product')->load($_product->getId())->getDescription();?>
                    	<?php echo $desc; ?>
                    </p>
                    <p id="bio" class="hide">
                    	<?php $Bio = Mage::getModel('catalog/product')->load($_product->getId())->getWineBio();?>
                    	<?php echo $Bio; ?>
                    </p>
                </div>
                <script>
					jQuery(document).ready(function(){
						jQuery("#des").addClass('show active');							
						jQuery("#detail1").removeClass().addClass("details active");						
						jQuery(".details").bind("click",function(){
							var divId = jQuery(this).attr("id");														
							if(divId=='detail1'){
								jQuery("#detail2").removeClass().addClass("details");	
								jQuery("#bio").removeClass().addClass('hide');
								jQuery("#des").removeClass().addClass('show');		
								jQuery("#detail1").removeClass().addClass("details active");
							}else if(divId=='detail2'){
								jQuery("#detail1").removeClass().addClass("details");
							   	jQuery("#des").removeClass().addClass('hide');
							   	jQuery("#bio").removeClass().addClass('show');
								jQuery("#detail2").removeClass().addClass("details active");										
							}
						});					 
					});
				</script>
                <style type="text/css">
					.hide{display:none;}
					.show{display:block;}
                </style>
                <div class="catagory-link">
                    <ul>
                    	<?php $domein = Mage::getModel('catalog/product')->load($_product->getId())->getWineDomain();?>
                    	<?php $region = Mage::getModel('catalog/product')->load($_product->getId())->getWineRegion();?>
                                                                        
                    	<?php if(!$domein==""):?><li><a href="<?php echo $domein; ?>">bekijk meer wijnen van dit domein</a></li><?php endif; ?>
                        <?php if(!$region==""):?><li><a href="<?php echo $region; ?>">bekijk meer wijnen uit deze regio</a></li><?php endif; ?>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="no-display">
            <input type="hidden" name="product" value="<?php echo $_product->getId() ?>" />
            <input type="hidden" name="related_product" id="related-products-field" value="" />
        </div>

        <div class="product-shop">          

            <?php echo $this->getChildHtml('other');?>

            <?php if ($_product->isSaleable() && $this->hasOptions()):?>
                <?php echo $this->getChildChildHtml('container1', '', true, true) ?>
            <?php endif;?>

        </div>       

        <div class="clearer"></div>
        <?php if ($_product->isSaleable() && $this->hasOptions()):?>
            <?php echo $this->getChildChildHtml('container2', '', true, true) ?>
        <?php endif;?>
    </form>
    <script type="text/javascript">
    //<![CDATA[
        var productAddToCartForm = new VarienForm('product_addtocart_form');
        productAddToCartForm.submit = function(button, url) {
            if (this.validator.validate()) {
                var form = this.form;
                var oldUrl = form.action;

                if (url) {
                   form.action = url;
                }
                var e = null;
                try {
                    this.form.submit();
                } catch (e) {
                }
                this.form.action = oldUrl;
                if (e) {
                    throw e;
                }

                if (button && button != 'undefined') {
                    button.disabled = true;
                }
            }
        }.bind(productAddToCartForm);

        productAddToCartForm.submitLight = function(button, url){
            if(this.validator) {
                var nv = Validation.methods;
                delete Validation.methods['required-entry'];
                delete Validation.methods['validate-one-required'];
                delete Validation.methods['validate-one-required-by-name'];
                // Remove custom datetime validators
                for (var methodName in Validation.methods) {
                    if (methodName.match(/^validate-datetime-.*/i)) {
                        delete Validation.methods[methodName];
                    }
                }

                if (this.validator.validate()) {
                    if (url) {
                        this.form.action = url;
                    }
                    this.form.submit();
                }
                Object.extend(Validation.methods, nv);
            }
        }.bind(productAddToCartForm);
    //]]>
    </script>
    </div>
    
</div>
